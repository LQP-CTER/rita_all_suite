<!-- File: Rita_All_Django/templates/tiktok_analyzer.html -->
{% extends "base.html" %}
{% load static %}

{% block title %}<title data-translate-key="title">TikTok Video Analyzer</title>{% endblock %}

{% block extra_css %}
    <style>
        body {
            overflow: auto;
        }
        .app-container {
            padding: 1.5rem;
            min-height: 100vh;
        }
        .main-content {
            padding: 0;
        }
        .tool-page {
            display: flex;
            flex-direction: column;
            gap: 1.75rem;
        }
        .tool-hero {
            display: flex;
            gap: 2.5rem;
            justify-content: space-between;
            align-items: stretch;
            padding: 2.5rem;
            border-radius: 28px;
            background: linear-gradient(140deg, rgba(26, 26, 46, 0.95), rgba(12, 14, 24, 0.9));
            border: 1px solid rgba(255, 255, 255, 0.08);
            position: relative;
            overflow: hidden;
            box-shadow: 0 30px 80px rgba(5, 8, 20, 0.55);
        }
        .tool-hero::after {
            content: "";
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at top right, rgba(79, 209, 197, 0.25), transparent 55%),
                        radial-gradient(circle at bottom left, rgba(104, 211, 145, 0.18), transparent 60%);
            pointer-events: none;
        }
        .hero-copy {
            position: relative;
            z-index: 1;
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
        }
        .hero-eyebrow {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.35rem 0.9rem;
            border-radius: 999px;
            background: rgba(104, 211, 145, 0.12);
            color: var(--primary-color);
            font-size: 0.85rem;
            letter-spacing: 0.04em;
            text-transform: uppercase;
            width: fit-content;
        }
        .hero-copy h1 {
            font-size: 2.6rem;
            font-weight: 600;
            line-height: 1.2;
            color: var(--text-primary);
            margin: 0;
        }
        .hero-copy p {
            color: var(--text-secondary);
            max-width: 520px;
            line-height: 1.65;
        }
        .hero-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
        }
        .stat-pill {
            display: inline-flex;
            align-items: center;
            gap: 0.55rem;
            padding: 0.55rem 1rem;
            border-radius: 14px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        .hero-card {
            position: relative;
            z-index: 1;
            width: 320px;
            min-height: 240px;
            padding: 1.75rem;
            border-radius: 22px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            background: rgba(10, 12, 20, 0.65);
            backdrop-filter: blur(14px);
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
            box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
        }
        .hero-card .hero-icon {
            width: 54px;
            height: 54px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(104, 211, 145, 0.35), rgba(79, 209, 197, 0.35));
            border: 1px solid rgba(104, 211, 145, 0.35);
        }
        .hero-card dl {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.65rem;
            margin: 0;
        }
        .hero-card dt {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            color: var(--text-secondary);
        }
        .hero-card dd {
            margin: 0;
            font-size: 1rem;
            color: var(--text-primary);
            line-height: 1.5;
        }
        .panel {
            background: rgba(12, 14, 24, 0.75);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 28px 60px rgba(5, 8, 20, 0.4);
            backdrop-filter: blur(12px);
            padding: 2rem 2.25rem;
        }
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .panel-header h2 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        #help-btn {
            border: none;
            background: rgba(255, 255, 255, 0.08);
            color: var(--text-primary);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition-smooth);
        }
        #help-btn:hover {
            background: rgba(104, 211, 145, 0.2);
            color: var(--primary-color);
        }
        #analyze-form {
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
        }
        .form-row {
            display: flex;
            gap: 0.85rem;
            flex-wrap: wrap;
        }
        #tiktok-url-input {
            flex: 1 1 280px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 14px;
            padding: 0.9rem 1.2rem;
            color: var(--text-primary);
            transition: var(--transition-smooth);
        }
        #tiktok-url-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(104, 211, 145, 0.18);
        }
        @keyframes inputPulse {
            from { box-shadow: 0 0 0 0 rgba(104, 211, 145, 0.25); }
            to { box-shadow: 0 0 0 16px rgba(104, 211, 145, 0); }
        }
        #tiktok-url-input.pulse {
            animation: inputPulse 0.6s ease-out;
        }
        #analyze-btn {
            background: linear-gradient(135deg, #68d391 0%, #4fd1c5 100%);
            color: #0b0c12;
            border: none;
            border-radius: 14px;
            padding: 0.9rem 1.7rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-smooth);
            box-shadow: 0 18px 40px rgba(79, 209, 197, 0.35);
        }
        #analyze-btn:disabled {
            background: rgba(255, 255, 255, 0.08);
            color: var(--text-secondary);
            box-shadow: none;
            cursor: not-allowed;
        }
        #analyze-btn:not(:disabled):hover {
            filter: brightness(1.05);
            transform: translateY(-1px);
        }
        .helper-text {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
        }
        .quick-chip {
            display: inline-flex;
            align-items: center;
            gap: 0.55rem;
            padding: 0.55rem 0.95rem;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            background: rgba(255, 255, 255, 0.04);
            color: var(--text-secondary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: var(--transition-smooth);
        }
        .quick-chip:hover {
            border-color: var(--primary-color);
            color: var(--text-primary);
            box-shadow: 0 12px 26px rgba(79, 209, 197, 0.22);
            transform: translateY(-2px);
        }
        .panel-results {
            padding: 0;
            overflow: hidden;
        }
        .results-inner {
            padding: 2rem 2.25rem;
            display: flex;
            flex-direction: column;
            gap: 1.75rem;
        }
        #loading-indicator {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            padding: 2rem 0;
            color: var(--text-secondary);
        }
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.08);
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            width: 44px;
            height: 44px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0); }
            to { transform: rotate(360deg); }
        }
        #results-wrapper {
            display: none;
        }
        .results-columns {
            display: grid;
            grid-template-columns: minmax(260px, 360px) 1fr;
            gap: 1.75rem;
        }
        .insight-columns {
            display: flex;
            flex-direction: column;
            gap: 1.75rem;
        }
        .result-card {
            background: rgba(255, 255, 255, 0.04);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            padding: 1.75rem;
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
        }
        .result-card h3 {
            margin: 0;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        .video-cover {
            width: 100%;
            aspect-ratio: 9/14;
            border-radius: 16px;
            object-fit: cover;
            box-shadow: 0 15px 35px rgba(5, 8, 20, 0.45);
        }
        .video-meta {
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
        }
        .video-title {
            font-size: 1.15rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        .video-author {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.75rem;
        }
        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            padding: 0.65rem 0.75rem;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            font-size: 0.9rem;
        }
        .stat-item i {
            color: var(--primary-color);
        }
        #video-download-link {
            display: none;
            text-align: center;
            padding: 0.75rem;
            border-radius: 12px;
            background: linear-gradient(135deg, #68d391, #4fd1c5);
            color: #0b0c12;
            font-weight: 600;
            transition: var(--transition-smooth);
        }
        #video-download-link:hover {
            filter: brightness(1.06);
        }
        .content-box {
            flex: 1;
            background: rgba(255, 255, 255, 0.04);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.06);
            padding: 1rem 1.25rem;
            color: var(--text-primary);
            line-height: 1.65;
            max-height: 320px;
            overflow-y: auto;
        }
        .content-box::-webkit-scrollbar {
            width: 8px;
        }
        .content-box::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.12);
            border-radius: 4px;
        }
        .content-box::-webkit-scrollbar-thumb:hover {
            background-color: var(--primary-color);
        }
        #analysis-output h4 {
            margin-top: 0;
            margin-bottom: 0.75rem;
            font-size: 1rem;
            color: var(--primary-color);
        }
        #analysis-output ul {
            margin: 0;
            padding-left: 1.2rem;
        }
        #analysis-output li {
            margin-bottom: 0.4rem;
        }
        .history-panel {
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
        }
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }
        .history-header h2 {
            margin: 0;
            font-size: 1.35rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        .history-actions {
            display: inline-flex;
            gap: 0.75rem;
        }
        .btn-action {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 999px;
            padding: 0.45rem 1rem;
            color: var(--text-primary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: var(--transition-smooth);
        }
        .btn-action:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        .btn-danger {
            color: #f87171;
            border-color: rgba(248, 113, 113, 0.4);
        }
        .btn-danger:hover {
            background: rgba(248, 113, 113, 0.15);
            color: #fca5a5;
        }
        .history-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 1.25rem;
        }
        .history-card {
            position: relative;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 18px;
            padding: 1.1rem;
            display: flex;
            flex-direction: column;
            gap: 0.9rem;
            cursor: pointer;
            transition: var(--transition-smooth);
        }
        .history-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(5, 8, 20, 0.35);
        }
        .history-card.is-selecting {
            border-style: dashed;
        }
        .history-card.is-selected {
            border-color: var(--primary-color);
            box-shadow: 0 18px 36px rgba(79, 209, 197, 0.28);
        }
        .history-checkbox {
            position: absolute;
            top: 14px;
            right: 14px;
            width: 18px;
            height: 18px;
        }
        .history-card-cover {
            width: 100%;
            aspect-ratio: 9/14;
            object-fit: cover;
            border-radius: 14px;
        }
        .history-card-desc {
            font-size: 0.95rem;
            line-height: 1.55;
            color: var(--text-primary);
        }
        .history-card-author {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        .history-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        .history-card-link {
            color: var(--primary-color);
            font-weight: 500;
        }
        #no-history-msg {
            color: var(--text-secondary);
            text-align: center;
        }
        #help-modal {
            display: none;
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.65);
            backdrop-filter: blur(6px);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        #help-modal.visible {
            display: flex;
        }
        .help-modal-card {
            width: min(480px, 90vw);
            background: rgba(12, 14, 24, 0.92);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2.25rem;
            color: var(--text-primary);
            box-shadow: 0 24px 60px rgba(5, 8, 20, 0.55);
            position: relative;
        }
        .help-modal-card h3 {
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1.4rem;
        }
        .help-modal-card p {
            color: var(--text-secondary);
            line-height: 1.65;
            margin-bottom: 1rem;
        }
        .help-modal-card strong {
            color: var(--primary-color);
        }
        #help-modal-close-btn {
            position: absolute;
            top: 1.1rem;
            right: 1.1rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.6rem;
            cursor: pointer;
        }
        .site-footer {
            padding-top: 1.5rem;
            font-size: 0.75rem;
            opacity: 0.6;
            text-align: center;
        }
        @media (max-width: 1024px) {
            .tool-hero {
                flex-direction: column;
            }
            .hero-card {
                width: 100%;
            }
        }
        @media (max-width: 768px) {
            .app-container {
                padding: 1rem;
            }
            .tool-hero {
                padding: 2rem;
            }
            .panel, .results-inner {
                padding: 1.5rem;
            }
            .form-row {
                flex-direction: column;
            }
            #analyze-btn {
                width: 100%;
            }
            .results-columns {
                grid-template-columns: 1fr;
            }
        }
    </style>
{% endblock %}

{% block content %}
<div class="tool-page">
    <section class="tool-hero">
        <div class="hero-copy">
            <span class="hero-eyebrow" data-translate-key="eyebrow">
                C√¥ng c·ª• TikTok
            </span>
            <h1 data-translate-key="h1">Hi·ªÉu s√¢u m·ªçi video trong v√†i gi√¢y</h1>
            <p data-translate-key="hero_p">Rita tr√≠ch xu·∫•t d·ªØ li·ªáu tr·ª±c ti·∫øp t·ª´ TikTok, t·∫°o transcript ƒë·∫ßy ƒë·ªß v√† ph√¢n t√≠ch n·ªôi dung b·∫±ng AI ƒë·ªÉ b·∫°n n·∫Øm b·∫Øt insight ngay l·∫≠p t·ª©c.</p>
            <div class="hero-stats">
                <span class="stat-pill" data-translate-key="stat_1">‚ö° Realtime fetch</span>
                <span class="stat-pill" data-translate-key="stat_2">üß† AI Ph√¢n t√≠ch</span>
                <span class="stat-pill" data-translate-key="stat_3">üì• T·∫£i video</span>
            </div>
        </div>
        <aside class="hero-card">
            <div class="hero-icon">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 5C8 2.79086 9.79086 1 12 1C14.2091 1 16 2.79086 16 5V13.5C16 14.8807 17.1193 16 18.5 16C20.433 16 22 17.567 22 19.5C22 21.433 20.433 23 18.5 23C16.567 23 15 21.433 15 19.5V9.8C13.9123 11.1263 12.2331 12 10.3333 12H10V17.5C10 20.5376 7.53757 23 4.5 23C1.46243 23 -1 20.5376 -1 17.5C-1 14.4624 1.46243 12 4.5 12C5.32843 12 6 12.6716 6 13.5C6 14.3284 5.32843 15 4.5 15C3.11929 15 2 16.1193 2 17.5C2 18.8807 3.11929 20 4.5 20C5.88071 20 7 18.8807 7 17.5V5Z" fill="#68d391"/>
                </svg>
            </div>
            <dl>
                <div>
                    <dt data-translate-key="card_dt_1">ƒê·ªô ph·ªß to√†n di·ªán</dt>
                    <dd data-translate-key="card_dd_1">T√≥m t·∫Øt, ch·ªâ s·ªë t∆∞∆°ng t√°c v√† transcript ƒë∆∞·ª£c gom trong m·ªôt dashboard duy nh·∫•t.</dd>
                </div>
                <div>
                    <dt data-translate-key="card_dt_2">Workflow nhanh ch√≥ng</dt>
                    <dd data-translate-key="card_dd_2">D√°n li√™n k·∫øt, ch·ªù Rita x·ª≠ l√Ω v√† l∆∞u l·ªãch s·ª≠ ƒë·ªÉ xem l·∫°i b·∫•t c·ª© l√∫c n√†o.</dd>
                </div>
            </dl>
        </aside>
    </section>

    <section class="panel">
        <div class="panel-header">
            <h2 data-translate-key="analyze_h2">Ph√¢n t√≠ch video</h2>
            <button type="button" id="help-btn" aria-label="H∆∞·ªõng d·∫´n" data-translate-aria-label="help_aria_label">
                ?
            </button>
        </div>
        <form id="analyze-form">
            {% csrf_token %}
            <div class="form-row">
                <input type="url" id="tiktok-url-input" name="video_url" placeholder="https://www.tiktok.com/@username/video/..." required data-translate-placeholder="input_placeholder">
                <button type="submit" id="analyze-btn" data-translate-key="analyze_btn">L·∫•y th√¥ng tin</button>
            </div>
            <p class="helper-text" data-translate-key="helper_text">G·ª£i √Ω: B·∫°n c√≥ th·ªÉ d√°n li√™n k·∫øt TikTok c√¥ng khai ho·∫∑c li√™n k·∫øt chia s·∫ª tr·ª±c ti·∫øp.</p>
            <div class="quick-actions">
                <span class="quick-chip" data-translate-key="chip_1">üí° T√¨m insight kh√°n gi·∫£</span>
                <span class="quick-chip" data-translate-key="chip_2">‚úçÔ∏è Chu·∫©n b·ªã script l·∫°i video</span>
                <span class="quick-chip" data-translate-key="chip_3">üìà ƒê√°nh gi√° t·ªâ l·ªá t∆∞∆°ng t√°c</span>
            </div>
        </form>
    </section>

    <section class="panel panel-results">
        <div class="results-inner">
            <div id="loading-indicator">
                <div class="spinner"></div>
                <p data-translate-key="loading_text">ƒêang l·∫•y d·ªØ li·ªáu...</p>
            </div>

            <div id="results-wrapper">
                <div class="results-columns">
                    <div class="result-card video-card result-col-left">
                        <img src="https://placehold.co/600x900/111827/94a3b8?text=TikTok+Preview" id="video-cover" alt="TikTok preview" class="video-cover">
                        <div class="video-meta">
                            <h3 class="video-title" id="video-title" data-translate-key="video_title_placeholder">Ti√™u ƒë·ªÅ video s·∫Ω hi·ªÉn th·ªã t·∫°i ƒë√¢y</h3>
                            <p class="video-author" id="video-author">@creator</p>
                            <div class="stat-grid">
                                <span class="stat-item"><i class="fas fa-play"></i> <span id="play-count">0</span> <span data-translate-key="views">l∆∞·ª£t xem</span></span>
                                <span class="stat-item"><i class="fas fa-heart"></i> <span id="like-count">0</span> <span data-translate-key="likes">l∆∞·ª£t th√≠ch</span></span>
                                <span class="stat-item"><i class="fas fa-comment"></i> <span id="comment-count">0</span> <span data-translate-key="comments">b√¨nh lu·∫≠n</span></span>
                                <span class="stat-item"><i class="fas fa-share"></i> <span id="share-count">0</span> <span data-translate-key="shares">chia s·∫ª</span></span>
                            </div>
                        </div>
                        <a id="video-download-link" href="#" target="_blank" rel="noopener noreferrer" data-translate-key="download_link">T·∫£i video g·ªëc</a>
                    </div>

                    <div class="insight-columns">
                        <div class="result-card transcript-card">
                            <h3 data-translate-key="transcript_h3">Transcript chi ti·∫øt</h3>
                            <div id="transcript-output" class="content-box"></div>
                        </div>
                        <div class="result-card analysis-card">
                            <h3 data-translate-key="analysis_h3">Ph√¢n t√≠ch t·ª´ Rita</h3>
                            <div id="analysis-output" class="content-box"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="panel history-panel">
        <div class="history-header">
            <h2 data-translate-key="history_h2">L·ªãch s·ª≠ ph√¢n t√≠ch</h2>
            <div class="history-actions">
                <button id="select-history-btn" class="btn-action" data-translate-key="select_btn">Ch·ªçn</button>
                <button id="delete-selected-btn" class="btn-action btn-danger" style="display: none;" data-translate-key="delete_btn">Xo√° ƒë√£ ch·ªçn</button>
                <button id="cancel-selection-btn" class="btn-action" style="display: none;" data-translate-key="cancel_btn">H·ªßy</button>
            </div>
        </div>
        <div id="history-list" class="history-list">
            {% for video in videos %}
                <div class="history-card" data-id="{{ video.id }}">
                    <input type="checkbox" class="history-checkbox" style="display: none;">
                    <img src="{{ video.cover_url }}" alt="Video cover" class="history-card-cover" onerror="this.src='https://placehold.co/400/111827/94a3b8?text=No+Cover'">
                    <p class="history-card-desc">{{ video.description|truncatechars:80 }}</p>
                    <p class="history-card-author"><span data-translate-key="by_author">b·ªüi</span> @{{ video.author }}</p>
                    <div class="history-card-footer">
                        <small class="history-card-date">{{ video.created_at|date:"d/m/Y" }}</small>
                        <a href="{{ video.video_url }}" target="_blank" rel="noopener noreferrer" class="history-card-link" data-translate-key="review_link">Xem l·∫°i</a>
                    </div>
                </div>
            {% empty %}
                <p id="no-history-msg" data-translate-key="no_history">Ch∆∞a c√≥ video n√†o ƒë∆∞·ª£c ph√¢n t√≠ch.</p>
            {% endfor %}
        </div>
    </section>
</div>

<footer class="site-footer">
    <p data-translate-key="footer_text">Rita c√≥ th·ªÉ m·∫Øc l·ªói, h√£y ki·ªÉm tra k·ªπ th√¥ng tin quan tr·ªçng.</p>
</footer>

<!-- Modal h∆∞·ªõng d·∫´n -->
<div id="help-modal">
    <div class="help-modal-card">
        <button id="help-modal-close-btn">&times;</button>
        <h3 data-translate-key="modal_h3">H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng TikTok Analyzer</h3>
        <p data-translate-key="modal_p1"><strong>B∆∞·ªõc 1:</strong> D√°n li√™n k·∫øt TikTok h·ª£p l·ªá v√†o √¥ nh·∫≠p v√† nh·∫•n ‚ÄúL·∫•y th√¥ng tin‚Äù. Rita s·∫Ω tr√≠ch xu·∫•t metadata v√† transcript.</p>
        <p data-translate-key="modal_p2"><strong>B∆∞·ªõc 2:</strong> Ch·ªù v√†i gi√¢y ƒë·ªÉ AI ph√¢n t√≠ch. K·∫øt qu·∫£ chi ti·∫øt s·∫Ω hi·ªÉn th·ªã ·ªü c·ªôt b√™n ph·∫£i.</p>
        <p data-translate-key="modal_p3"><strong>B∆∞·ªõc 3:</strong> S·ª≠ d·ª•ng l·ªãch s·ª≠ ƒë·ªÉ xem l·∫°i ho·∫∑c x√≥a nhi·ªÅu k·∫øt qu·∫£ c√πng l√∫c.</p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/tiktok_analyzer.js' %}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Add page-specific translations
            Object.assign(translations.vi, {
                'title': "Tr√¨nh ph√¢n t√≠ch video TikTok",
                'eyebrow': "C√¥ng c·ª• TikTok",
                'h1': "Hi·ªÉu s√¢u m·ªçi video trong v√†i gi√¢y",
                'hero_p': "Rita tr√≠ch xu·∫•t d·ªØ li·ªáu tr·ª±c ti·∫øp t·ª´ TikTok, t·∫°o transcript ƒë·∫ßy ƒë·ªß v√† ph√¢n t√≠ch n·ªôi dung b·∫±ng AI ƒë·ªÉ b·∫°n n·∫Øm b·∫Øt insight ngay l·∫≠p t·ª©c.",
                'stat_1': "‚ö° L·∫•y d·ªØ li·ªáu Realtime",
                'stat_2': "üß† Ph√¢n t√≠ch b·∫±ng AI",
                'stat_3': "üì• T·∫£i video",
                'card_dt_1': "ƒê·ªô ph·ªß to√†n di·ªán",
                'card_dd_1': "T√≥m t·∫Øt, ch·ªâ s·ªë t∆∞∆°ng t√°c v√† transcript ƒë∆∞·ª£c gom trong m·ªôt dashboard duy nh·∫•t.",
                'card_dt_2': "Workflow nhanh ch√≥ng",
                'card_dd_2': "D√°n li√™n k·∫øt, ch·ªù Rita x·ª≠ l√Ω v√† l∆∞u l·ªãch s·ª≠ ƒë·ªÉ xem l·∫°i b·∫•t c·ª© l√∫c n√†o.",
                'analyze_h2': "Ph√¢n t√≠ch video",
                'help_aria_label': "H∆∞·ªõng d·∫´n",
                'input_placeholder': "https://www.tiktok.com/@username/video/...",
                'analyze_btn': "L·∫•y th√¥ng tin",
                'helper_text': "G·ª£i √Ω: B·∫°n c√≥ th·ªÉ d√°n li√™n k·∫øt TikTok c√¥ng khai ho·∫∑c li√™n k·∫øt chia s·∫ª tr·ª±c ti·∫øp.",
                'chip_1': "üí° T√¨m insight kh√°n gi·∫£",
                'chip_2': "‚úçÔ∏è Chu·∫©n b·ªã script l·∫°i video",
                'chip_3': "üìà ƒê√°nh gi√° t·ªâ l·ªá t∆∞∆°ng t√°c",
                'loading_text': "ƒêang l·∫•y d·ªØ li·ªáu...",
                'video_title_placeholder': "Ti√™u ƒë·ªÅ video s·∫Ω hi·ªÉn th·ªã t·∫°i ƒë√¢y",
                'views': "l∆∞·ª£t xem",
                'likes': "l∆∞·ª£t th√≠ch",
                'comments': "b√¨nh lu·∫≠n",
                'shares': "chia s·∫ª",
                'download_link': "T·∫£i video g·ªëc",
                'transcript_h3': "Transcript chi ti·∫øt",
                'analysis_h3': "Ph√¢n t√≠ch t·ª´ Rita",
                'history_h2': "L·ªãch s·ª≠ ph√¢n t√≠ch",
                'select_btn': "Ch·ªçn",
                'delete_btn': "Xo√° ƒë√£ ch·ªçn",
                'cancel_btn': "H·ªßy",
                'by_author': "b·ªüi",
                'review_link': "Xem l·∫°i",
                'no_history': "Ch∆∞a c√≥ video n√†o ƒë∆∞·ª£c ph√¢n t√≠ch.",
                'footer_text': "Rita c√≥ th·ªÉ m·∫Øc l·ªói, h√£y ki·ªÉm tra k·ªπ th√¥ng tin quan tr·ªçng.",
                'modal_h3': "H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng TikTok Analyzer",
                'modal_p1': "<strong>B∆∞·ªõc 1:</strong> D√°n li√™n k·∫øt TikTok h·ª£p l·ªá v√†o √¥ nh·∫≠p v√† nh·∫•n ‚ÄúL·∫•y th√¥ng tin‚Äù. Rita s·∫Ω tr√≠ch xu·∫•t metadata v√† transcript.",
                'modal_p2': "<strong>B∆∞·ªõc 2:</strong> Ch·ªù v√†i gi√¢y ƒë·ªÉ AI ph√¢n t√≠ch. K·∫øt qu·∫£ chi ti·∫øt s·∫Ω hi·ªÉn th·ªã ·ªü c·ªôt b√™n ph·∫£i.",
                'modal_p3': "<strong>B∆∞·ªõc 3:</strong> S·ª≠ d·ª•ng l·ªãch s·ª≠ ƒë·ªÉ xem l·∫°i ho·∫∑c x√≥a nhi·ªÅu k·∫øt qu·∫£ c√πng l√∫c."
            });

            Object.assign(translations.en, {
                'title': "TikTok Video Analyzer",
                'eyebrow': "TikTok Tool",
                'h1': "Understand any video in seconds",
                'hero_p': "Rita extracts data directly from TikTok, generates a full transcript, and analyzes the content with AI for you to capture insights instantly.",
                'stat_1': "‚ö° Realtime Fetch",
                'stat_2': "üß† AI Analysis",
                'stat_3': "üì• Video Download",
                'card_dt_1': "Comprehensive Coverage",
                'card_dd_1': "Summaries, engagement metrics, and transcripts are all gathered in a single dashboard.",
                'card_dt_2': "Fast Workflow",
                'card_dd_2': "Paste a link, wait for Rita to process, and save the history to review anytime.",
                'analyze_h2': "Analyze Video",
                'help_aria_label': "Instructions",
                'input_placeholder': "https://www.tiktok.com/@username/video/...",
                'analyze_btn': "Fetch Info",
                'helper_text': "Hint: You can paste a public TikTok link or a direct share link.",
                'chip_1': "üí° Find audience insights",
                'chip_2': "‚úçÔ∏è Prepare a video script",
                'chip_3': "üìà Evaluate engagement rate",
                'loading_text': "Fetching data...",
                'video_title_placeholder': "Video title will appear here",
                'views': "views",
                'likes': "likes",
                'comments': "comments",
                'shares': "shares",
                'download_link': "Download Original Video",
                'transcript_h3': "Detailed Transcript",
                'analysis_h3': "Analysis from Rita",
                'history_h2': "Analysis History",
                'select_btn': "Select",
                'delete_btn': "Delete Selected",
                'cancel_btn': "Cancel",
                'by_author': "by",
                'review_link': "Review",
                'no_history': "No videos have been analyzed yet.",
                'footer_text': "Rita can make mistakes, please double-check important information.",
                'modal_h3': "How to use TikTok Analyzer",
                'modal_p1': "<strong>Step 1:</strong> Paste a valid TikTok link into the input field and press ‚ÄúFetch Info‚Äù. Rita will extract metadata and the transcript.",
                'modal_p2': "<strong>Step 2:</strong> Wait a few seconds for the AI analysis. Detailed results will appear in the right column.",
                'modal_p3': "<strong>Step 3:</strong> Use the history to review past results or delete multiple entries at once."
            });
            
            // Re-apply translations
            const currentLang = localStorage.getItem('preferredLanguage') || 'vi';
            applyTranslations(currentLang);

            // Additional script from old file
            const quickChips = document.querySelectorAll('.quick-chip');
            const urlInput = document.getElementById('tiktok-url-input');

            quickChips.forEach(chip => {
                chip.addEventListener('click', () => {
                    if (!urlInput) return;
                    urlInput.focus();
                    urlInput.classList.add('pulse');
                    setTimeout(() => urlInput.classList.remove('pulse'), 600);
                });
            });
        });
    </script>
{% endblock %}